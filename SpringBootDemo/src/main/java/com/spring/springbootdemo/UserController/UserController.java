package com.spring.springbootdemo.UserController;

import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;
import org.springframework.web.multipart.MultipartHttpServletRequest;

import javax.servlet.http.HttpServletRequest;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.util.List;

@RestController
@SpringBootApplication
//表示该controller类下所有的方法都公用的一级上下文根
@RequestMapping(value = "/springboot")
public class UserController {
    //这里使用@RequestMapping注解表示该方法对应的二级上下文路径
    //http://localhost:8080/springboot/getUserByGet?userName=ge
    @RequestMapping(value = "/getUserByGet", method = RequestMethod.GET)
    String getUserByGet(@RequestParam(value = "userName") String userName){
        return "Hello " + userName;
    }

    //通过RequestMethod.POST表示请求需要时POST方式
    //http://localhost:8080/springboot/getUserByPost?userName=ge
    @RequestMapping(value = "/getUserByPost", method = RequestMethod.POST)
    String getUserByPost(@RequestParam(value = "userName") String userName){
        return "Hello " + userName;
    }

    //POST形式的json串
    //http://localhost:8080/springboot/postDataByJson
    @RequestMapping(value = "/postDataByJson", method = RequestMethod.POST)
    String postDataByJson(@RequestBody String data){
        return "Json is " + data;
    }

    //POST形式的form-data，方法1
    @RequestMapping(value = "/postDataByFromData", method = RequestMethod.POST)
    String postDataByFromData(HttpServletRequest request,String name,String age){
        //String name = request.getParameter("name");
        //String age = request.getParameter("age");
        System.out.println(age);
        System.out.println(name);
        return name;
    }

    //POST形式的form-data，方法2
    @RequestMapping(value = "/postDataByFromData1", method = RequestMethod.POST)
    String postDataByFromData1(HttpServletRequest request){
        String name = request.getParameter("name");
        String age = request.getParameter("age");
        System.out.println(age);
        System.out.println(name);
        return name;
    }

    //上传文件，方法
    @RequestMapping(value = "/uploadFile", method = RequestMethod.POST)
    String uploadFile(@RequestParam("file") MultipartFile file){
        if (!file.isEmpty()) {
            String name = file.getOriginalFilename();
            return "上传成功:"+name;

        }else {
            return "上传失败，因为文件是空的.";
        }
    }

    //上传文件+其他参数，方法1
    @RequestMapping(value = "/uploadFile1", method = RequestMethod.POST)
    String uploadFile1(HttpServletRequest request){
        MultipartHttpServletRequest params=((MultipartHttpServletRequest) request);
        List<MultipartFile> files = ((MultipartHttpServletRequest) request)
                .getFiles("file");
        String name=params.getParameter("name");
        System.out.println("name:"+name);
        return name;
    }

    //上传文件+其他参数，方法1
    @RequestMapping(value = "/uploadFile2", method = RequestMethod.POST)
    String uploadFile2(HttpServletRequest request,String name,@RequestParam("file") MultipartFile file){
        String filename = file.getOriginalFilename();
        System.out.println("name:"+name);
        double[] characteristic1 = new double[]{8.786779403686523, 3.7773826122283936, -4.330023288726807, 0.05978289991617203, 3.2906134128570557, 0.16530969738960266, -4.196817398071289, 4.723718166351318, -5.7897748947143555, -0.488737553358078, 1.6094789505004883, 3.2260324954986572, -0.9581437706947327, 2.8878612518310547, 5.119525909423828, 4.248753070831299, 0.7461389303207397, -5.299811363220215, 6.948632717132568, 0.3076815903186798, 1.461102843284607, 5.109344959259033, 5.29325532913208, 0.9454588890075684, -1.9028546810150146, 0.6063896417617798, -0.27428314089775085, -5.622392654418945, 7.023313522338867, -1.6833068132400513, -0.42302221059799194, -2.963238000869751, 0.12054287642240524, -1.5870078802108765, -0.6857961416244507, -3.389794111251831, 1.6988744735717773, -2.2553718090057373, -5.179375171661377, -0.41323134303092957, 0.9128001928329468, 0.6441250443458557, 0.49784091114997864, -4.374012470245361, 5.1989569664001465, -5.6897711753845215, 0.5578739047050476, -2.0901904106140137, 0.2944866120815277, -1.6429866552352905, 1.5163055658340454, 3.2274534702301025, -1.1731817722320557, 0.021175099536776543, 0.4669959545135498, -0.3483007252216339, -3.8605549335479736, 2.9502363204956055, 1.5925246477127075, 1.9650073051452637, 9.206869125366211, 3.617893934249878, 2.7833125591278076, -6.766026973724365, 4.758419990539551, -1.1394824981689453, -6.430022239685059, 5.005507469177246, -8.65187931060791, -4.2605791091918945, -0.09356143325567245, -0.2271474003791809, 9.814823150634766, -3.9544761180877686, -3.584597110748291, -1.3881980180740356, 3.453381061553955, -5.653720378875732, 8.862032890319824, 8.8740873336792, 3.3111724853515625, 0.7998092770576477, -4.662988662719727, 1.8391343355178833, -0.2935575842857361, -4.536928653717041, -5.21610164642334, -3.7887167930603027, 5.649747848510742, 8.487056732177734, 2.0049192905426025, 4.1518635749816895, -6.795104503631592, 2.8719022274017334, -8.500906944274902, -3.9641294479370117, -1.0083441734313965, 4.815457820892334, -6.999391078948975, 0.6999285221099854, 1.821927785873413, -0.5329491496086121, 4.958678245544434, -4.814828872680664, -0.668200671672821, 5.069151401519775, 6.471230983734131, 0.8454728126525879, 4.404021739959717, 11.266963005065918, -1.2042815685272217, 5.808895587921143, 10.016156196594238, -1.2787433862686157, -1.433831810951233, -0.9117673635482788, -3.4612865447998047, 4.59653902053833, -10.88158130645752, 5.5159430503845215, -1.930864930152893, -1.46937096118927, 5.767435073852539, 7.607740879058838, -0.6094739437103271, -1.9930685758590698, 8.617207527160645, -0.025727897882461548, 0.2762005627155304, 1.317231297492981, 0.9481743574142456, -3.3734123706817627, -3.4296751022338867, 1.275083065032959, 5.223937034606934, -6.6970086097717285, 1.5498617887496948, 1.3153817653656006, -1.4253004789352417, -8.193568229675293, 1.1359506845474243, -0.4427478015422821, 0.7390087842941284, 2.6174352169036865, 5.2418060302734375, -2.1228182315826416, 1.643532395362854, -5.702998638153076, -3.65958571434021, -0.6928327679634094, -0.12857577204704285, 2.3536250591278076, -5.700118064880371, 2.159651041030884, -8.028331756591797, 5.729852676391602, 2.6822397708892822, -7.785390853881836, -4.777149200439453, 1.692015290260315, -3.1970160007476807, 2.0950143337249756, 3.464707612991333, -0.49957776069641113, -3.986436128616333, -4.346548080444336, -0.9935389757156372, 1.4723142385482788, -5.328054904937744, 1.726637840270996, 0.8288963437080383, -5.900973796844482, -2.969780921936035, 4.325993061065674, -6.214994430541992, -1.0388551950454712, 3.2362735271453857, 1.6945514678955078, -2.480494737625122, 5.489787578582764, 7.926914215087891, -1.1192655563354492, -0.41516026854515076, -4.4087090492248535, -3.432114601135254, 6.722870826721191, -0.5246149301528931, 7.999413013458252, -4.473446369171143, 3.947822332382202, 3.520116090774536, -6.258370399475098, 3.850433111190796, -2.4252381324768066, -2.390207290649414, -0.13644471764564514, -3.975391149520874, 0.21326220035552979, 6.381007671356201, 0.0504908561706543, 2.461714744567871, -8.113212585449219, -3.6484062671661377, 4.173838138580322, -0.9461250901222229, 0.3449418544769287, -4.906053066253662, 0.6937431693077087, 3.5775890350341797, -2.705551862716675, -2.7331454753875732, 4.576523780822754, -4.280228137969971, 3.904029369354248, -2.034026622772217, -1.4211887121200562, -5.989425182342529, 2.9019103050231934, -0.04977358877658844, -6.144208908081055, -2.5001790523529053, -1.9985767602920532, -0.13547301292419434, 1.1354628801345825, 2.797896385192871, -1.982325553894043, -4.249011516571045, 7.40615701675415, -1.3530172109603882, 2.7304069995880127, -1.4039751291275024, -10.707584381103516, -0.6517650485038757, 3.4656031131744385, -2.964747667312622, -4.660623550415039, 3.953861713409424, -5.1502814292907715, -1.655495285987854, 4.436148166656494, -1.4104620218276978, -3.790032386779785, -5.461965560913086, 0.250885933637619, -5.613048076629639, 2.0701825618743896, 3.23494291305542, 6.022502422332764, -4.9787726402282715, -1.164799451828003, 1.90170156955719, 1.8291122913360596, -0.8930558562278748, -1.0962562561035156, 0.3951239585876465, -6.9355387687683105};
        double[] characteristic2 = new double[]{1.524789810180664, -4.881449222564697, -2.0960941314697266, 0.8953748941421509, -3.6509783267974854, -2.0353446006774902, -4.502956390380859, 4.357341766357422, -2.652986526489258, 1.8367784023284912, 1.1717411279678345, 3.4046213626861572, -4.019151210784912, 0.5708802342414856, 1.588207483291626, 2.5106704235076904, 0.2827211320400238, 2.570082426071167, 4.22454309463501, -0.8374122977256775, 1.840456485748291, 2.26914381980896, -1.4758930206298828, 1.292385458946228, -1.3474805355072021, 4.097089767456055, -0.48915302753448486, -5.57639217376709, 4.23435115814209, -2.0008418560028076, 1.7545416355133057, 2.1771159172058105, 0.9290543794631958, -0.8653106689453125, 0.16057337820529938, -2.27608323097229, 6.041106224060059, -1.1915943622589111, -7.91520357131958, 3.8723812103271484, 3.5479912757873535, 5.124983310699463, -0.3477739691734314, -2.1092867851257324, -2.7454326152801514, -0.39563366770744324, 3.7403128147125244, -2.2104108333587646, -0.823083221912384, 2.058264970779419, 3.946887254714966, 2.435704231262207, -3.404566764831543, 2.4348678588867188, -1.3155415058135986, 1.0655356645584106, -1.6581438779830933, 1.0459692478179932, -4.0520124435424805, -2.7412002086639404, 2.131120204925537, 0.5965030193328857, -0.1828622668981552, -2.4631175994873047, 1.4042569398880005, -1.0338181257247925, -0.3060745894908905, 4.135573863983154, -4.193840026855469, -1.2507120370864868, 1.7072858810424805, -1.9102836847305298, 5.316166400909424, -5.061445713043213, -3.5622289180755615, 4.689366340637207, 5.54006290435791, -0.686296820640564, 3.9761874675750732, 8.423964500427246, -0.03844711184501648, 2.2999820709228516, -3.3054168224334717, 2.102262020111084, 1.926640510559082, 1.5385419130325317, -10.19489860534668, -5.039734840393066, 6.562545299530029, 2.653249979019165, 2.578303575515747, 6.1749677658081055, -1.0874701738357544, 6.023531436920166, -6.5017170906066895, -1.303838849067688, 3.8029584884643555, 6.056241035461426, -1.3070303201675415, -2.5119214057922363, -1.4812424182891846, -2.309769630432129, 1.972314715385437, -1.9551159143447876, 1.6244540214538574, -0.5579617619514465, 1.4570584297180176, -2.3149168491363525, 5.663562297821045, 7.188431262969971, -1.7949789762496948, 4.017847537994385, 5.5822434425354, -4.648039817810059, 2.2132556438446045, -7.193806171417236, -1.1879351139068604, 2.0775296688079834, -9.177347183227539, 10.532882690429688, -3.586033821105957, -6.7215070724487305, 2.3251168727874756, 4.148879051208496, -0.41237252950668335, -0.7202563285827637, 5.530662536621094, -1.1633111238479614, 1.469261884689331, 4.893630027770996, -0.322588711977005, -6.50459098815918, -6.683836936950684, 1.584364891052246, 2.827721357345581, -4.415170192718506, 2.8768062591552734, 2.1096980571746826, -0.7190258502960205, -8.30357551574707, -2.295560836791992, 1.035288691520691, -1.6026314496994019, 0.5310273170471191, 1.1601613759994507, -3.0100982189178467, 2.0836143493652344, -5.034178733825684, -3.8347458839416504, 3.0000152587890625, 1.1333767175674438, -0.49265390634536743, -0.1327938288450241, 2.898221254348755, -5.993670463562012, 0.6316639184951782, 4.667265892028809, -0.38001498579978943, -1.1615089178085327, -2.7986669540405273, -1.1479954719543457, 3.6877224445343018, 2.6979939937591553, 7.3572998046875, -7.9866132736206055, 2.2537152767181396, -3.7765400409698486, 3.180269956588745, -2.12690806388855, 7.884984493255615, -0.12801435589790344, -2.8013110160827637, -5.595586776733398, 2.245246410369873, -3.9436542987823486, 1.0598827600479126, 1.2212653160095215, 0.6093477606773376, -7.2511162757873535, 5.679170608520508, 2.5624375343322754, 0.4977583885192871, 0.5741493701934814, -2.149409294128418, -0.901077151298523, 6.963891983032227, 3.3240013122558594, 9.949280738830566, -5.827159881591797, 2.25860333442688, -3.42482852935791, -8.071039199829102, 4.3778862953186035, 0.6764368414878845, -0.618975043296814, 2.3874611854553223, -3.364994764328003, -1.1601895093917847, 1.3879153728485107, 2.8498220443725586, 0.7034047842025757, -5.775293350219727, 0.5942704677581787, 6.899096488952637, 2.043616533279419, 2.5239884853363037, -3.110520362854004, -2.4256784915924072, 3.635712146759033, 0.8467281460762024, -1.2099480628967285, 5.757422924041748, 2.471080780029297, 0.4086245894432068, -0.44314298033714294, 1.4771372079849243, -2.0730645656585693, -2.1420576572418213, -4.9649977684021, -4.72999906539917, -3.577303409576416, -0.049462396651506424, -4.702527046203613, -1.0554863214492798, 6.89309024810791, 0.0139739029109478, -1.6469497680664062, 5.085658073425293, -7.126217842102051, 0.9335164427757263, 4.729130268096924, -5.409401893615723, 3.0739448070526123, 1.374560832977295, 0.5074010491371155, -0.9675074219703674, 1.8341126441955566, -2.4622819423675537, -4.75907039642334, 3.8158583641052246, -3.293926954269409, -2.084299087524414, 2.1429476737976074, -2.278803586959839, -3.7849020957946777, -1.5288554430007935, 4.056471347808838, -0.34452682733535767, 0.5857111811637878, -2.0735888481140137, 3.8253326416015625, -2.7077319622039795, 2.212928295135498, -6.248425006866455, 3.178361654281616, -3.1355128288269043};
        float anorm = 0;
        for (double now : characteristic1) {
            anorm += (now * now);
        }
        anorm = (float) Math.sqrt(anorm);

        float bnorm = 0;
        for (double now : characteristic2) {
            bnorm += (now * now);
        }
        bnorm = (float) Math.sqrt(bnorm);

        float ab = 0;
        for (int i = 0; i < characteristic1.length; i++) {
            ab += (characteristic1[i] * characteristic2[i]);
        }
        float dis = ab / (anorm * bnorm);
        dis = (float) (0.5 + (0.5 * dis));
        System.out.println(dis);
        return filename;
    }
}
